<div ng-repeat="chapter in chapters | orderByPriority">
  <h1>{{chapter.name}} ({{chapter.shortName}})</h1>
  <div>
    <datepicker ng-model="newEvent.date" show-weeks="false"></datepicker>
    <a class="btn btn-primary" ng-click="addEvent(chapter.$id)">New Event</a>
  </div>
  <div>
    <span
      ng-pluralize
      count="(chapter.events | keyCount)"
      when="{
        '0': 'No events',
        'one': '1 event',
        'other': '{} events'}"></span>
    &bull;
    <span
      ng-pluralize
      count="(chapter.participants | keyCount)"
      when="{
        '0': 'No participants',
        'one': '1 participant',
        'other': '{} participants'}"></span>
  </div>

  <hr/>

  <div ng-repeat="event in eventsByChapter[chapter.$id] | orderByPriority | orderBy:'-date'">
    <strong>{{event.name}}</strong>
    {{event.date | date:'mediumDate'}}
    &bull;
    <span
      ng-pluralize
      count="(event.participants | keyCount)"
      when="{
        '0': 'No participants',
        'one': '1 participant',
        'other': '{} participants'}"></span>
    &bull;
    <a ng-click="removeEvent(event.$id, chapter.$id)" href>Remove event</a>
  </div>

</div>