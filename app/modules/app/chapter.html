<a ui-sref="app.chapters">All chapters</a>
<h1>{{chapter.name}} ({{chapter.shortName}})</h1>

<a class="btn btn-default" ng-click="openAddEventModal()">New Event</a>
<a class="btn btn-default" ng-click="openAddParticipantModal()">New Participant</a>

<hr/>

<div>
  <span
    ng-pluralize
    count="(chapter.events | keyCount)"
    when="{
      '0': 'No events',
      'one': '1 event',
      'other': '{} events'}"></span>
  &bull;
  <span
    ng-pluralize
    count="(chapter.participants | keyCount)"
    when="{
      '0': 'No participants',
      'one': '1 participant',
      'other': '{} participants'}"></span>
</div>

<hr/>

<input
  type="text" class="form-control"
  ng-model="selectedParticipant"
  typeahead="participant as participant.alias for participant in (participants | orderByPriority) | filter:{ $: $viewValue } | limitTo:8"
  typeahead-template-url="modules/typeahead/participant.html"
  typeahead-on-select="selectParticipant()"/>

  <hr/>

  <div ng-repeat="event in chapterEvents | orderByPriority | orderBy:'-date'">
    <a ui-sref="app.event({ id: event.$id })">
      <strong>{{event.name}}</strong>
    </a>
    {{event.date | date:'mediumDate'}}
    &bull;
    <span
      ng-pluralize
      count="(event.participants | keyCount)"
      when="{
        '0': 'No participants',
        'one': '1 participant',
        'other': '{} participants'}"></span>
    &bull;
    <a ng-click="removeEvent(event.$id, chapter.$id)" href>Remove event</a>
  </div>

  <hr/>

  <div ng-repeat="participant in chapterParticipants | orderByPriority">
    <strong>{{participant | hashName}}</strong>
    {{participant.firstName}} {{participant.lastName}}
    &bull;
    <span
      ng-pluralize
      count="(participant.events | keyCount)"
      when="{
        '0': 'No events',
        'one': '1 event',
        'other': '{} events'}"></span>
    &bull;
    <a ng-click="removeParticipant(participant.$id, chapter.$id)" href>Remove participant</a>
  </div>
